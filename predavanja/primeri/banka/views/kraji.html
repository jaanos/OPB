% rebase('osnova.html', naslov='Pošte')

  <div>
    Iskanje: <input type="text" id="iskalnik"
              oninput="filtriraj(this.value.toLocaleLowerCase())" />
  </div>

  <a href="{{url('kraji_dodaj')}}">Dodaj kraj</a>

    <table class="table table-striped" id="podatki">
      <tr>
        <th>Poštna številka</th>
        <th>Kraj</th>
        <th></th>
      </tr>
      %for posta, kraj in poste:
      <tr>
        <td>{{posta}}</td>
        <td>{{kraj}}</td>
        <td>
          <form action="{{url('kraji_uredi', posta=posta)}}" method="GET">
            <input value="Uredi" type="submit" />
          </form>
          <form action="{{url('kraji_brisi', posta=posta)}}" method="POST">
            <input value="Izbriši" type="submit" />
          </form>
        </td>
      </tr>
      %end
    </table>

    <script>
      'use strict'
      let filtriraj = function(niz) {
        let podatki = document.getElementById("podatki");
        [...podatki.rows].forEach(vrstica => {
          if (vrstica.cells[0].tagName.toLocaleLowerCase() == "th") {
            return;
          }
          if (vrstica.cells[1].innerText.toLocaleLowerCase().indexOf(niz) >= 0) {
            vrstica.style.display = '';
          } else {
            vrstica.style.display = 'none';
          }
        })
      }
    </script>