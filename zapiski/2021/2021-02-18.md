---
tags: vaje, opb, insert, update, delete, select
hackmd: https://hackmd.io/yGv-urqwRTm54-EDM7QQrw
---
# Osnove podatkovnih baz - vaje 18.2.2021

---

## Osnovna uporaba SQL

## Naloga 3: Ukaz `INSERT`

1. Vsak naj se vpiše v tabelo `oseba`. Po potrebi je treba prej vpisati še kraj v tabelo `kraj`. Vpiši se z ukazom `INSERT`. (Najprej klikni na zbirko `banka` in izberi zavihek *SQL*. Odpre se polje, v katerega lahko pišeš ukaze SQL in jih izvajaš.)
      
2. V tabeli `racun` ustvari še svoj bančni račun.

3. V tabeli `transakcija` naredi nekaj transakcij na svojem računu,
   na primer vsaj dva dviga in dva pologa.

---

### Naloga 4: Ukaz `UPDATE`

V tabeli `oseba` poskusi spremeniti EMŠO v zapisu, ki si ga naredil v nalogi 3. Uporabi ukaz `UPDATE`. Ali ti baza to dovoli? Poskusi spremeniti še kakšno drugo polje v tabeli.

---

### Naloga 5: Ukaz `DELETE`

Iz tabele `transakcija` zbriši eno transakcijo (vseeno katero).
Glej, da ne pobrišeš celotne tabele!

### Naloga 6: Ukaz `SELECT`

Naredi naslednje poizvede:

1. Za vse osebe, ki živijo v kraju s poštno številko 2000, izpiši celotne pripadajoče vrstice.

2. Vse osebe v tabeli `osebe`, vendar izpiši samo ime, priimek in poštno številko.

3. Vse transakcije, pri katerih je znesek manjši od -1000.

4. Vse transakcije, pri katerih je znesek manjši od -1000. Zneski transakcij naj bodo pri izpisu zaokroženi na najbližjo stotico proti ničli. (Uporabi celoštevilsko deljenje.)

5. Vse osebe v tabeli `osebe`, vendar izpiši samo ime, priimek in ime kraja, v katerem živijo (pomagati si bo treba s tabelo `kraj`).

6. Vse osebe, ki živijo v kraju *Maribor*, pri čemer poštno številko dobiš iz tabele `kraj`.

Nato naredi še bolj komplicirane poizvedbe:

1. Z uporabo funkcije `count` preštej, koliko računov je odprtih na banki.

2. Preštej, koliko je oseb, ki živijo v kraju s poštno številko 1000.

3. Z uporabo funkcije `sum` izračunaj, koliko denarja je trenutno v banki (seštej stolpec `znesek` v tabeli `transakcija`).

4. Z uporabo funkcije `sum` izračunaj, koliko denarja imaš trenutno na svojem računu.

5. Izpiši imena in priimke vseh tistih ljudi, ki so naredili vsaj eno transakcijo z absolutno vrednostjo 1000 ali več. Pri izpisu ne podvajaj oseb, ki so opravile več takih transakcij; uporabi določilo `DISTINCT`.

6. Nadgradnja prejšnje naloge: za vsako osebo, ki je opravila vsaj eno transakcijo z absolutno vrednostjo 1000 ali več, izpiši niz *__Ime Priimek__ iz kraja __Kraj__*. Uporabi operator `||` za stikanje nizov.

7. **Dodatna naloga**:  Z uporabo funkcij `sum` in `pow` ter ustrezne funkcije, ki izračuna razliko med dvema časoma (poišči jo v dokumentaciji!), izračunaj, koliko denarja imaš trenutno na svojem računu, pri predpostavki, da se obrestuje z 1% na 30 dni. (Obračunavanje pa je zvezno - po enem dnevu in pol recimo profitiraš za faktor 1.01<sup>1.5/30</sup>).
